# üêõ –ë–∞–≥-—Ñ–∏–∫—Å: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ .done –∏ .sent

**–í–µ—Ç–∫–∞**: `fix/report-status-duplicate-done-sent`  
**–ë–∞–∑–æ–≤–∞—è –≤–µ—Ç–∫–∞**: `cleanarch`  
**–î–∞—Ç–∞**: 8 –¥–µ–∫–∞–±—Ä—è 2024  

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–í —Å—Ç–∞—Ç—É—Å–Ω–æ–π –º–æ–¥–µ–ª–∏ `ReportStatus` –±—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ:

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ `.done` –∏ `.sent` –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–ª–∞ 5 —Å—Ç–∞—Ç—É—Å–æ–≤, –Ω–æ –≤ enum –∏—Ö –±—ã–ª–æ 6
3. **–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞—è –ª–æ–≥–∏–∫–∞**: –í —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
```swift
enum ReportStatus {
    case done = "done"      // ‚ùå –î—É–±–ª–∏—Ä—É–µ—Ç sent
    case sent = "sent"      // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
}
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤**
- –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π `.done` —Å—Ç–∞—Ç—É—Å
- –û—Å—Ç–∞–≤–ª–µ–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π `.sent` —Å—Ç–∞—Ç—É—Å –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ deprecated –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
```swift
@available(*, deprecated, renamed: "sent", message: "Use .sent instead of .done")
static let done: ReportStatus = .sent
```

### 2. **–£—Ç–∏–ª–∏—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**
–°–æ–∑–¥–∞–Ω `ReportStatusMigrator` –¥–ª—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ `"done"` ‚Üí `"sent"`
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–¥–∞**
- **16 —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**
- –í—Å–µ `switch` statements –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- –í—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è `== .done` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `== .sent`
- –í—Å–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è `.done` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `.sent`
- –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Core Changes
- `LazyBones/Domain/Entities/ReportStatus.swift` - –æ—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ enum
- `LazyBones/Core/Common/Utils/ReportStatusMigrator.swift` - –Ω–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
- `LazyBones/LazyBonesApp.swift` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### Services & Logic
- `LazyBones/Core/Services/ReportStatusManager.swift`
- `LazyBones/Core/Services/PostNotificationService.swift`
- `LazyBones/Core/Common/Utils/ReportStatusFactory.swift`
- `LazyBones/Core/Common/Protocols/ReportStatusUIRepresentable.swift`
- `LazyBones/Domain/UseCases/UpdateStatusUseCase.swift`

### ViewModels & Views
- `LazyBones/Presentation/ViewModels/MainViewModel.swift`
- `LazyBones/Presentation/ViewModels/States/MainState.swift`
- `LazyBones/Presentation/ViewModels/PostFormViewModel.swift`
- `LazyBones/Views/Forms/RegularReportFormView.swift`
- `LazyBones/Views/Forms/PostFormView.swift`

### Tests (8 —Ñ–∞–π–ª–æ–≤)
- –í—Å–µ —Ç–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—É—Å–Ω–æ–π –º–æ–¥–µ–ª–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `ReportStatusMigrator`
- –£–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ `.done` –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
- `Tests/Core/Utils/ReportStatusMigratorTests.swift` - 12 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–∑ `"done"` –≤ `"sent"`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üîß –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç—á–µ—Ç–∞
2. –ú–∏–≥—Ä–∞—Ü–∏—è `"done"` ‚Üí `"sent"` –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå 6 —Å—Ç–∞—Ç—É—Å–æ–≤ –≤–º–µ—Å—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö 5
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `.done` –∏ `.sent`
- ‚ùå –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∫–æ–¥–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ 5 —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π `.sent` —Å—Ç–∞—Ç—É—Å –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–µ—Ä–¥–∂—É

- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ code review

**–í–µ—Ç–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å–ª–∏—è–Ω–∏—é —Å `cleanarch`**