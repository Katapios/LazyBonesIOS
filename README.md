# LazyBones

## Структура проекта

- `LazyBones/Models/` — модели данных (Post, VoiceNote и др.)
- `LazyBones/Views/` — основные SwiftUI-вьюшки
  - `Forms/` — формы (например, PostFormView)
  - `Widgets/` — виджеты (если появятся)
- `LazyBones/Extensions/` — расширения и модификаторы
- `LazyBones/Assets.xcassets/` — ассеты (иконки, цвета)
- `Tests/` — все unit-тесты, разбиты по функционалу

## Основные компоненты

- **Post** — модель отчёта пользователя
- **VoiceNote** — модель голосовой заметки (id, path)
- **PostFormView** — форма создания/редактирования отчёта с чеклистами и голосовыми заметками
- **VoiceRecorderListView** — список голосовых заметок с возможностью добавления, удаления, перезаписи, воспроизведения
- **ReportsView** — список всех отчётов
- **SettingsView** — настройки приложения (имя устройства, Telegram)
- **MainView** — главный экран с таймером и статусом
- **View+HideKeyboard** — модификатор для скрытия клавиатуры

## Принципы

- Чистая архитектура: модели и бизнес-логика отделены от UI
- DI через EnvironmentObject
- Все View-файлы структурированы по папкам
- Тесты вынесены в отдельную папку и разбиты по смыслу
- Нет дублирующихся или неиспользуемых файлов

## Как добавить новую вьюшку или тест
- Поместите View в соответствующую подпапку Views (или Forms/Widgets)
- Для моделей используйте Models
- Для тестов — Tests, разбивайте по функционалу

# Настройка BGTaskScheduler для фоновой отправки отчета

1. Откройте Xcode, выберите ваш Target.
2. Перейдите в раздел **Signing & Capabilities** и включите:
   - Background Modes
   - Отметьте галочки: Background fetch, Background processing
3. Перейдите в раздел **Info** (Target Info, не файл Info.plist):
   - Добавьте новый ключ типа **String Array** с именем:
     `BGTaskSchedulerPermittedIdentifiers`
   - В массив добавьте строку:
     `com.katapios.LazyBones.sendReport`
   - (Если потребуется несколько задач — добавьте дополнительные идентификаторы)
4. Сохраните изменения.

---

**После этого приложение сможет регистрировать и выполнять фоновые задачи через BGTaskScheduler.**
