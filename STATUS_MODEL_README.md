# üìä –°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å LazyBones

## –û–±–∑–æ—Ä

–°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å LazyBones - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –æ—Ç—á–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ UI, —Ç–∞–π–º–µ—Ä–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `ReportStatus` enum
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `PostStore.updateReportStatus()`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ callbacks

### –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@Published` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- Dependency Injection –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏

## üìã –°—Ç–∞—Ç—É—Å—ã –æ—Ç—á–µ—Ç–æ–≤

### Enum ReportStatus

```swift
enum ReportStatus: String, Codable, CaseIterable {
    case notStarted    // "–ó–∞–ø–æ–ª–Ω–∏ –æ—Ç—á–µ—Ç"
    case inProgress    // "–û—Ç—á–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è..."
    case sent          // "–û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"
    case notCreated    // "–û—Ç—á—ë—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω"
    case notSent       // "–û—Ç—á—ë—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"
    case done          // "–ó–∞–≤–µ—Ä—à–µ–Ω"
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–Ω–æ–ø–∫–∞ | –¢–∞–π–º–µ—Ä | –ü–µ—Ä–∏–æ–¥ |
|--------|----------|--------|--------|--------|
| `notStarted` | –û—Ç—á–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω, –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω | "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç" (–∞–∫—Ç–∏–≤–Ω–∞) | "–î–æ –∫–æ–Ω—Ü–∞" | –ê–∫—Ç–∏–≤–µ–Ω |
| `inProgress` | –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω | "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç" (–∞–∫—Ç–∏–≤–Ω–∞) | "–î–æ –∫–æ–Ω—Ü–∞" | –ê–∫—Ç–∏–≤–µ–Ω |
| `sent` | –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram | "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç" (–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞) | "–î–æ —Å—Ç–∞—Ä—Ç–∞" | –õ—é–±–æ–π |
| `notCreated` | –û—Ç—á–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω, –ø–µ—Ä–∏–æ–¥ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è | "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç" (–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞) | "–î–æ —Å—Ç–∞—Ä—Ç–∞" | –ù–µ–∞–∫—Ç–∏–≤–µ–Ω |
| `notSent` | –û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –ø–µ—Ä–∏–æ–¥ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è | "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç" (–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞) | "–î–æ —Å—Ç–∞—Ä—Ç–∞" | –ù–µ–∞–∫—Ç–∏–≤–µ–Ω |
| `done` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å—Ç–∞—Ç—É—Å | "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç" (–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞) | "–ó–∞–≤–µ—Ä—à–µ–Ω–æ" | –õ—é–±–æ–π |

## ‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

### –ê–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- **–í—Ä–µ–º—è**: 8:00 - 22:00
- **–°—Ç–∞—Ç—É—Å—ã**: `notStarted`, `inProgress`
- **–¢–∞–π–º–µ—Ä**: "–î–æ –∫–æ–Ω—Ü–∞" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –¥–æ 22:00)

### –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- **–í—Ä–µ–º—è**: 22:00 - 8:00 (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å)
- **–°—Ç–∞—Ç—É—Å—ã**: `notCreated`, `notSent`, `sent`
- **–¢–∞–π–º–µ—Ä**: "–î–æ —Å—Ç–∞—Ä—Ç–∞" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –¥–æ 8:00 —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è)

## üîÑ –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–Ω—è**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª –ª–∏ –Ω–æ–≤—ã–π –¥–µ–Ω—å
   - –ï—Å–ª–∏ –Ω–∞—Å—Ç—É–ø–∏–ª –Ω–æ–≤—ã–π –¥–µ–Ω—å, —Å—Ç–∞—Ç—É—Å—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
   ```swift
   if hasRegularReport {
       if isPeriodActive {
           return isReportPublished ? .sent : .inProgress
       } else {
           return isReportPublished ? .sent : .notSent
       }
   } else {
       return isPeriodActive ? .notStarted : .notCreated
   }
   ```

3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**
   - –ï—Å–ª–∏ `forceUnlock = true`, —Å—Ç–∞—Ç—É—Å –≤—Å–µ–≥–¥–∞ `.notStarted`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞)
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (–ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –ø–µ—Ä–∏–æ–¥–∞–º–∏)
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ó–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. PostStore
```swift
class PostStore: ObservableObject {
    @Published var reportStatus: ReportStatus = .notStarted
    
    func updateReportStatus() {
        // –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    }
    
    func checkForNewDay() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–Ω—è
    }
}
```

#### 2. PostTimerService
```swift
class PostTimerService {
    func updateReportStatus(_ status: ReportStatus) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞
    }
}
```

#### 3. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```swift
struct MainStatusBarView: View {
    var reportStatusText: String {
        switch store.reportStatus {
        case .notStarted: return "–ó–∞–ø–æ–ª–Ω–∏ –æ—Ç—á–µ—Ç!"
        case .inProgress: return "–û—Ç—á–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è..."
        // ...
        }
    }
}
```

### –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   UI Views  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  PostStore  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   Services  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                   ‚îÇ                   ‚îÇ
       ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Widgets   ‚îÇ    ‚îÇUserDefaults ‚îÇ    ‚îÇ Telegram    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ReportStatusConfig

```swift
struct ReportStatusConfig {
    struct TimeSettings {
        let startHour: Int      // 8
        let endHour: Int        // 22
        let timeZone: TimeZone  // .current
    }
    
    struct StatusSettings {
        let enableForceUnlock: Bool    // true
        let autoResetOnNewDay: Bool    // true
        let enableNotifications: Bool  // true
    }
    
    struct UISettings {
        let showTimer: Bool           // true
        let showProgress: Bool        // true
        let enableWidgetUpdates: Bool // true
    }
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–∏–æ–¥–æ–≤

```swift
let customConfig = ReportStatusConfig(
    timeSettings: ReportStatusConfig.TimeSettings(
        startHour: 9,
        endHour: 18,
        timeZone: .current
    ),
    // ...
)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```swift
class ReportStatusFlexibilityTest: XCTestCase {
    func testStatusCreation() {
        let status = factory.createStatus(
            hasRegularReport: false,
            isReportPublished: false,
            isPeriodActive: true
        )
        XCTAssertEqual(status, .notStarted)
    }
}
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å: `.notStarted`
   - –ö–Ω–æ–ø–∫–∞: –∞–∫—Ç–∏–≤–Ω–∞
   - –¢–∞–π–º–µ—Ä: "–î–æ –∫–æ–Ω—Ü–∞"

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å: `.inProgress`
   - –ö–Ω–æ–ø–∫–∞: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç"
   - –¢–∞–π–º–µ—Ä: "–î–æ –∫–æ–Ω—Ü–∞"

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å: `.sent`
   - –ö–Ω–æ–ø–∫–∞: –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
   - –¢–∞–π–º–µ—Ä: "–î–æ —Å—Ç–∞—Ä—Ç–∞"

4. **–ù–æ–≤—ã–π –¥–µ–Ω—å**
   - –°—Ç–∞—Ç—É—Å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `.notStarted`
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–∞—é—Ç—Å—è

## üöÄ –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞

### –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π**
   - –í—Ä–µ–º—è –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞—Å—Ç—É–ø–∏–ª–æ
   - –ü–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω –∏–ª–∏ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è
   - –ï—Å—Ç—å –æ—Ç—á–µ—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤**
   - Regular –æ—Ç—á–µ—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - Custom –æ—Ç—á–µ—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –°–æ–æ–±—â–µ–Ω–∏–µ "–ó–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞" (–µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç—á–µ—Ç–æ–≤)

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `.sent`
   - –û—Ç—á–µ—Ç—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ `published: true`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏

```swift
@Published var autoSendEnabled: Bool = true
@Published var autoSendTime: Date = Calendar.current.date(bySettingHour: 22, minute: 0, second: 0, of: Date())!
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI

```swift
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
if reportStatus != newStatus {
    reportStatus = newStatus
    localService.saveReportStatus(newStatus)
    timerService.updateReportStatus(newStatus)
    WidgetCenter.shared.reloadAllTimelines()
    if notificationsEnabled { scheduleNotifications() }
}
```

### –í–∏–¥–∂–µ—Ç—ã

- –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ `WidgetCenter`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- –í–∏–¥–∂–µ—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ —Ç–∞–π–º–µ—Ä

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–∞
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üì± UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### MainStatusBarView

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ—Ç—á–µ—Ç–∞
- –¢–∞–π–º–µ—Ä (–≤—Ä–µ–º—è –¥–æ –∫–æ–Ω—Ü–∞/—Å—Ç–∞—Ä—Ç–∞)
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

### LargeButtonView

–ö–Ω–æ–ø–∫–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º:
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã**: `.notStarted`, `.inProgress`
- **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã**: `.sent`, `.notCreated`, `.notSent`, `.done`

### –ó–∞–≥–ª—É—à–∫–∞ "–ñ–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è"

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ `DailyReportView` –∏ `RegularReportFormView` –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤:
- `.sent`
- `.notCreated`
- `.notSent`

## üîç –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```swift
print("[DEBUG] updateReportStatus: forceUnlock=\(forceUnlock), reportStatus=\(reportStatus)")
print("[DEBUG] –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞: —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ updateReportStatus()")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```swift
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
print("–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: \(store.reportStatus.displayName)")

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞
print("–ü–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω: \(store.isReportPeriodActive())")

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
print("–ï—Å—Ç—å regular –æ—Ç—á–µ—Ç: \(store.posts.contains { $0.type == .regular })")
```

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ enum**
   ```swift
   case newStatus = "new_status"
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å displayName**
   ```swift
   case .newStatus: return "–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å"
   ```

3. **–û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ updateReportStatus()**
   ```swift
   // –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   ```swift
   // –î–æ–±–∞–≤–∏—Ç—å case –≤ switch statements
   ```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å ReportStatusConfig**
   ```swift
   struct NewSettings {
       let newOption: Bool
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–±—Ä–∏–∫—É**
   ```swift
   // –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
   ```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤

```swift
var reportStatusColor: Color {
    switch store.reportStatus {
    case .notStarted, .notCreated, .notSent:
        return .gray
    case .inProgress, .sent, .done:
        return .black
    }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤

```swift
var reportStatusText: String {
    switch store.reportStatus {
    case .notStarted: return "–ó–∞–ø–æ–ª–Ω–∏ –æ—Ç—á–µ—Ç!"
    case .inProgress: return "–û—Ç—á–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è..."
    // ...
    }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤

```swift
let customTimeSettings = ReportStatusConfig.TimeSettings(
    startHour: 6,
    endHour: 23,
    timeZone: .current
)
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –§–∞–π–ª—ã –º–æ–¥–µ–ª–∏

- `LazyBones/Models/Post.swift` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- `LazyBones/Core/Services/PostTimerService.swift` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏
- `LazyBones/Core/Services/PostTelegramService.swift` - –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞
- `LazyBones/Views/Components/MainStatusBarView.swift` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –¢–µ—Å—Ç—ã

- `Tests/ReportStatusFlexibilityTest.swift` - —Ç–µ—Å—Ç—ã –≥–∏–±–∫–æ—Å—Ç–∏
- `Tests/NewDayLogicTest.swift` - —Ç–µ—Å—Ç—ã –ª–æ–≥–∏–∫–∏ –Ω–æ–≤–æ–≥–æ –¥–Ω—è
- `Tests/ReportPeriodLogicTest.swift` - —Ç–µ—Å—Ç—ã –ø–µ—Ä–∏–æ–¥–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `LazyBones/Core/Common/Utils/ReportStatusConfig.swift` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `LazyBones/Core/Common/Utils/ReportStatusFactory.swift` - —Ñ–∞–±—Ä–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- `LazyBones/Core/Common/Protocols/ReportStatusUIRepresentable.swift` - UI –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

---

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ —Å—Ç–∞—Ç—É—Å–Ω–æ–π –º–æ–¥–µ–ª—å—é:

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `updateReportStatus()`** –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** —Å –ø–æ–º–æ—â—å—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
3. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º** –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 31 –∏—é–ª—è 2025* 