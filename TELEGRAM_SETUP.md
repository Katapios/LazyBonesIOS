# ✉️ Настройка Telegram для LazyBones

Этот гид поможет подключить отправку отчётов в Telegram: вручную и автоматически.

## Требования

- Аккаунт Telegram
- Доступ к созданию бота через @BotFather
- (Опционально) ID личного чата или группы/канала для публикации

## Шаг 1 — Создайте бота

1. Откройте Telegram и найдите @BotFather
2. Команда: `/newbot`
3. Укажите имя и username бота
4. Сохраните токен (например: `123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11`)

## Шаг 2 — Получите chat_id

Варианты:

- Личный чат с ботом:
  1) Напишите любое сообщение вашему боту
  2) Откройте `https://api.telegram.org/bot<ТОКЕН>/getUpdates`
  3) Найдите `message.chat.id` — это ваш chat_id

- Группа/канал:
  1) Добавьте бота в группу/канал и выдайте право «Публиковать сообщения»
  2) Включите «История для новых участников» (для групп) при необходимости
  3) Отправьте сообщение в группу/канал
  4) Используйте `getUpdates` как выше или узнайте id через бота @RawDataBot

Пример chat_id: `-1001234567890` (канал/супергруппа) или `123456789` (личный чат)

## Шаг 3 — Настройка в приложении

Откройте Настройки в LazyBones и заполните:

- Telegram Token: вставьте токен из @BotFather
- Telegram Chat ID: вставьте целевой chat_id
- Автоотправка: включите, если хотите отправлять отчёты автоматически по расписанию
- Время автоотправки: выберите желаемое время

## Ручная отправка

- Откройте отчёт за сегодня и нажмите «Отправить в Telegram»
- Убедитесь, что токен и chat_id корректны

## Автоотправка

- Включите «Автоотправка в Telegram» в Настройках
- Выберите время
- Приложение отправит последний отчёт за текущий день, если он создан

## Советы по безопасности

- Не публикуйте токен в открытых репозиториях/скриншотах
- При утечке токена — сразу сгенерируйте новый в @BotFather

## Отладка

- Проверьте интернет‑соединение и актуальность токена
- Убедитесь, что бот добавлен в группу/канал и имеет право писать
- Проверьте логи в Xcode (Logger.telegram)
- Для интеграционных тестов используйте моки Telegram сервиса

## Частые ошибки

- 401 Unauthorized: неверный токен
- 403 Forbidden: бота нет в чате или нет прав на отправку
- 400 Bad Request: некорректный chat_id или формат сообщения

Готово! Теперь вы можете отправлять отчёты LazyBones в Telegram.
