# ๐ฑ iCloud Reports Feature - ะะพะบัะผะตะฝัะฐัะธั

## ๐ฏ ะะฑะทะพั

ะะพะฒะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั **iCloud Reports** ะฟะพะทะฒะพะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ัะบัะฟะพััะธัะพะฒะฐัั ะธ ะธะผะฟะพััะธัะพะฒะฐัั ะพััะตัั ัะตัะตะท iCloud Drive, ัะพะทะดะฐะฒะฐั ัะธััะตะผั ัะพะฒะผะตััะฝัั ะพััะตัะพะฒ ะผะตะถะดั ััััะพะนััะฒะฐะผะธ.

## ๐๏ธ ะััะธัะตะบัััะฐ

### Clean Architecture Implementation

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    PRESENTATION LAYER                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ICloudReportsViewModel โ                                  โ
โ  ICloudReportsView โ                                       โ
โ  SettingsView Integration โ                                โ
โ  ReportsView Integration โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      DOMAIN LAYER                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  DomainICloudReport โ                                      โ
โ  ExportReportsUseCase โ                                    โ
โ  ImportICloudReportsUseCase โ                              โ
โ  ICloudReportRepositoryProtocol โ                          โ
โ  ReportFormatterProtocol โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                       DATA LAYER                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ICloudReportRepository โ                                  โ
โ  ICloudFileManager โ                                       โ
โ  ReportFormatter โ                                         โ
โ  ICloudReportMapper โ                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    INFRASTRUCTURE LAYER                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ICloudService โ                                           โ
โ  DependencyContainer Integration โ                         โ
โ  iCloud Drive Integration โ                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั

### 1. ะญะบัะฟะพัั ะพััะตัะพะฒ ะฒ iCloud

**ะะพะบะฐัะธั**: ะะฐัััะพะนะบะธ โ iCloud ัะบัะฟะพัั

**ะคัะฝะบัะธะธ**:
- โ ะญะบัะฟะพัั ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั ะฒ ัะพัะผะฐัะต Telegram
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะฟะฐะฟะบะธ `LazyBonesReports` ะฒ iCloud Drive
- โ ะกะพััะฐะฝะตะฝะธะต ะฒ ัะฐะนะป `LazyBonesReports.report`
- โ ะะพะฟะพะปะฝะตะฝะธะต ะบ ัััะตััะฒัััะตะผั ัะฐะนะปั (ะฝะต ะฟะตัะตะทะฐะฟะธัั)
- โ ะะบะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพะฑ ััััะพะนััะฒะต

**ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ**:
- โ๏ธ ะะตั ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั โ "ะะตั ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั ะดะปั ัะบัะฟะพััะฐ"
- โ iCloud ะฝะตะดะพัััะฟะตะฝ โ "iCloud ะฝะตะดะพัััะฟะตะฝ"
- โ ะะตั ะดะพัััะฟะฐ ะบ ัะฐะนะปั โ "ะะตั ะดะพัััะฟะฐ ะบ ัะฐะนะปั"

### 2. ะะผะฟะพัั ะพััะตัะพะฒ ะธะท iCloud

**ะะพะบะฐัะธั**: ะััะตัั โ ะััะตัั ะธะท iCloud

**ะคัะฝะบัะธะธ**:
- โ ะะฐะณััะทะบะฐ ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั ะธะท iCloud ัะฐะนะปะฐ
- โ ะัะพะฑัะฐะถะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ัะฐะนะปะต (ัะฐะทะผะตั, ะฒัะตะผั ะพะฑะฝะพะฒะปะตะฝะธั)
- โ ะะฝะพะฟะบะฐ "ะะฑะฝะพะฒะธัั" ะดะปั ะฟะตัะตะทะฐะณััะทะบะธ
- โ ะะฝะพะฟะบะฐ "ะฃะดะฐะปะธัั ัะฐะนะป" ะดะปั ะพัะธััะบะธ
- โ ะัะพะฑัะฐะถะตะฝะธะต ะพััะตัะพะฒ ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

**ะกะพััะพัะฝะธั**:
- ๐ ะะฐะณััะทะบะฐ โ ProgressView ั ัะตะบััะพะผ
- โ ะัะธะฑะบะฐ โ ะะฝะพะฟะบะฐ "ะะพะฒัะพัะธัั" ั ะพะฟะธัะฐะฝะธะตะผ ะพัะธะฑะบะธ
- ๐ญ ะัััะพ โ "ะะตั ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั" ั ะธะฝััััะบัะธัะผะธ
- โ ะฃัะฟะตั โ ะกะฟะธัะพะบ ะพััะตัะพะฒ ั ะบะฐััะพัะบะฐะผะธ

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

### Domain Layer
```
LazyBones/Domain/Entities/DomainICloudReport.swift
LazyBones/Domain/UseCases/ExportReportsUseCase.swift
LazyBones/Domain/UseCases/ImportICloudReportsUseCase.swift
LazyBones/Domain/Repositories/ICloudReportRepositoryProtocol.swift
LazyBones/Domain/Repositories/ReportFormatterProtocol.swift
```

### Data Layer
```
LazyBones/Data/DataSources/ICloudFileManager.swift
LazyBones/Data/DataSources/ReportFormatter.swift
LazyBones/Data/Repositories/ICloudReportRepository.swift
LazyBones/Data/Mappers/ICloudReportMapper.swift
```

### Infrastructure Layer
```
LazyBones/Core/Services/ICloudService.swift
```

### Presentation Layer
```
LazyBones/Presentation/ViewModels/ICloudReportsViewModel.swift
LazyBones/Presentation/Views/ICloudReportsView.swift
```

### Tests
```
Tests/ArchitectureTests/ICloudServiceTests.swift
Tests/Presentation/ViewModels/ICloudReportsViewModelTests.swift
Tests/Integration/ICloudIntegrationTests.swift
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### iCloud Drive
- **ะะฐะฟะบะฐ**: `LazyBonesReports/`
- **ะคะฐะนะป**: `LazyBonesReports.report`
- **ะคะพัะผะฐั**: ะขะตะบััะพะฒัะน ัะฐะนะป ั Telegram-ัะฐะทะผะตัะบะพะน

### Dependency Injection
ะัะต ัะตัะฒะธัั ะทะฐัะตะณะธัััะธัะพะฒะฐะฝั ะฒ `DependencyContainer`:
- `ICloudFileManager`
- `ReportFormatter`
- `ICloudReportRepository`
- `ExportReportsUseCase`
- `ImportICloudReportsUseCase`
- `ICloudService`

## ๐ ะคะพัะผะฐัั ะดะฐะฝะฝัั

### DomainICloudReport
```swift
struct DomainICloudReport {
    let id: UUID
    let date: Date
    let deviceName: String
    let deviceIdentifier: String
    let username: String?
    let reportContent: String
    let reportType: PostType
    let timestamp: Date
}
```

### ะคะพัะผะฐัั ัะบัะฟะพััะฐ
- **Telegram**: HTML-ัะฐะทะผะตัะบะฐ ั ัะผะพะดะทะธ
- **Plain**: ะัะพััะพะน ัะตะบัั
- **JSON**: ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### Unit Tests
- โ `ICloudServiceTests` - ัะตััะธัะพะฒะฐะฝะธะต ัะตัะฒะธัะฐ
- โ `ICloudReportsViewModelTests` - ัะตััะธัะพะฒะฐะฝะธะต ViewModel

### Integration Tests
- โ `ICloudIntegrationTests` - ะฟะพะปะฝัะน ัะธะบะป ัะบัะฟะพัั/ะธะผะฟะพัั
- โ ะขะตััะธัะพะฒะฐะฝะธะต ั ะฟััััะผะธ ะพััะตัะฐะผะธ
- โ ะขะตััะธัะพะฒะฐะฝะธะต ะฝะตะดะพัััะฟะฝะพััะธ iCloud

### Mock Objects
- โ `MockICloudService`
- โ `MockICloudFileManager`
- โ `MockReportFormatter`
- โ `MockICloudReportRepository`

## ๐ ะะพะปัะทะพะฒะฐัะตะปััะบะธะต ััะตะฝะฐัะธะธ

### ะกัะตะฝะฐัะธะน 1: ะญะบัะฟะพัั ะพััะตัะพะฒ
1. ะะพะปัะทะพะฒะฐัะตะปั ัะพะทะดะฐะตั ะพััะตัั ะทะฐ ัะตะณะพะดะฝั
2. ะะตัะตัะพะดะธั ะฒ ะะฐัััะพะนะบะธ โ iCloud ัะบัะฟะพัั
3. ะะฐะถะธะผะฐะตั "ะญะบัะฟะพััะธัะพะฒะฐัั ะพััะตัั ะฒ iCloud"
4. ะกะธััะตะผะฐ ะฟัะพะฒะตััะตั ะฝะฐะปะธัะธะต ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั
5. ะัะปะธ ะพััะตัั ะตััั โ ัะบัะฟะพััะธััะตั ะฒ iCloud
6. ะัะปะธ ะพััะตัะพะฒ ะฝะตั โ ะฟะพะบะฐะทัะฒะฐะตั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต

### ะกัะตะฝะฐัะธะน 2: ะะผะฟะพัั ะพััะตัะพะฒ
1. ะะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตัะพะดะธั ะฒ ะััะตัั โ ะััะตัั ะธะท iCloud
2. ะกะธััะตะผะฐ ะฟัะพะฒะตััะตั ะดะพัััะฟะฝะพััั iCloud
3. ะะฐะณััะถะฐะตั ะพััะตัั ะทะฐ ัะตะณะพะดะฝั ะธะท ัะฐะนะปะฐ
4. ะัะพะฑัะฐะถะฐะตั ัะฟะธัะพะบ ะพััะตัะพะฒ ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
5. ะะพะบะฐะทัะฒะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ัะฐะนะปะต

### ะกัะตะฝะฐัะธะน 3: ะััััะต ะพััะตัั
1. ะะพะปัะทะพะฒะฐัะตะปั ะฟััะฐะตััั ัะบัะฟะพััะธัะพะฒะฐัั ะฑะตะท ะพััะตัะพะฒ
2. ะกะธััะตะผะฐ ะฟะพะบะฐะทัะฒะฐะตั: "โ๏ธ ะะตั ะพััะตัะพะฒ ะทะฐ ัะตะณะพะดะฝั ะดะปั ัะบัะฟะพััะฐ"
3. ะะพะปัะทะพะฒะฐัะตะปั ัะพะทะดะฐะตั ะพััะตัั ะธ ะฟะพะฒัะพััะตั ัะบัะฟะพัั

## ๐ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

### ExportReportsError
- `noReportsToExport` - ะฝะตั ะพััะตัะพะฒ ะดะปั ัะบัะฟะพััะฐ
- `iCloudNotAvailable` - iCloud ะฝะตะดะพัััะฟะตะฝ
- `fileAccessDenied` - ะฝะตั ะดะพัััะฟะฐ ะบ ัะฐะนะปั
- `formattingError` - ะพัะธะฑะบะฐ ัะพัะผะฐัะธัะพะฒะฐะฝะธั

### ImportICloudReportsError
- `iCloudNotAvailable` - iCloud ะฝะตะดะพัััะฟะตะฝ
- `fileNotFound` - ัะฐะนะป ะฝะต ะฝะฐะนะดะตะฝ
- `noReportsFound` - ะพััะตัั ะฝะต ะฝะฐะนะดะตะฝั
- `parsingError` - ะพัะธะฑะบะฐ ััะตะฝะธั ัะฐะนะปะฐ

## ๐ ะะตััะธะบะธ

### ะะพะณะธัะพะฒะฐะฝะธะต
- โ ะญะบัะฟะพัั ะพััะตัะพะฒ (ะบะพะปะธัะตััะฒะพ, ััะฟะตั/ะพัะธะฑะบะฐ)
- โ ะะผะฟะพัั ะพััะตัะพะฒ (ะบะพะปะธัะตััะฒะพ, ััะฟะตั/ะพัะธะฑะบะฐ)
- โ ะะพัััะฟะฝะพััั iCloud
- โ ะะฟะตัะฐัะธะธ ั ัะฐะนะปะฐะผะธ

### ะะฝะฐะปะธัะธะบะฐ
- ะะพะปะธัะตััะฒะพ ัะบัะฟะพััะพะฒ ะฒ ะดะตะฝั
- ะะพะปะธัะตััะฒะพ ะธะผะฟะพััะพะฒ ะฒ ะดะตะฝั
- ะะฐะทะผะตั ัะฐะนะปะฐ ะพััะตัะพะฒ
- ะะพะปะธัะตััะฒะพ ััััะพะนััะฒ ะฒ ัะธััะตะผะต

## ๐ฎ ะัะดััะธะต ัะปัััะตะฝะธั

### ะัะฐัะบะพััะพัะฝัะต
- [ ] ะญะบัะฟะพัั ะทะฐ ะฒัะฑัะฐะฝะฝัะน ะฟะตัะธะพะด
- [ ] ะคะธะปัััะฐัะธั ะฟะพ ััััะพะนััะฒะฐะผ
- [ ] ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฝะพะฒัั ะพััะตัะฐั
- [ ] ะะฒัะพะผะฐัะธัะตัะบะฐั ัะธะฝััะพะฝะธะทะฐัะธั

### ะะพะปะณะพััะพัะฝัะต
- [ ] ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะฟัะพัะผะพััะฐ ะพััะตัะพะฒ
- [ ] ะกัะฐัะธััะธะบะฐ ะธ ะฐะฝะฐะปะธัะธะบะฐ
- [ ] ะะพะผะฐะฝะดะฝัะต ะพััะตัั
- [ ] ะะฝัะตะณัะฐัะธั ั ะบะฐะปะตะฝะดะฐัะตะผ

## ๐ ะัะธะผะตัะฐะฝะธั

### ะกะพะฒะผะตััะธะผะพััั
- โ ะะฑัะฐัะฝะฐั ัะพะฒะผะตััะธะผะพััั ั ัััะตััะฒัััะธะผะธ ะพััะตัะฐะผะธ
- โ ะะฝัะตะณัะฐัะธั ั ัััะตััะฒัััะธะผ UI
- โ ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัััะตััะฒัััะธั ะผะพะดะตะปะตะน ะดะฐะฝะฝัั

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- โ ะัะธะฝััะพะฝะฝัะต ะพะฟะตัะฐัะธะธ
- โ ะััะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั
- โ ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะพะต ััะตะฝะธะต ัะฐะนะปะพะฒ

### ะะตะทะพะฟะฐัะฝะพััั
- โ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ iCloud
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะดะพัััะฟะฐ
- โ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั

---

**ะกัะฐััั**: โ ะะฐะฒะตััะตะฝะพ ะธ ะฟัะพัะตััะธัะพะฒะฐะฝะพ  
**ะะตััะธั**: 1.0.0  
**ะะฐัะฐ**: 2025-01-XX 