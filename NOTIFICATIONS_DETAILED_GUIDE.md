# –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º –≤ LazyBones

## üì± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### üîß –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ LazyBones —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É:

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
2. **–í—Ä–µ–º—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —á–∞—Å—ã
3. **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ**: –ö–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
4. **–£—Å–ª–æ–≤–∏—è**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è, –µ—Å–ª–∏ –æ—Ç—á–µ—Ç –∑–∞ –¥–µ–Ω—å —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ
- **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å**: "–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ UserDefaults —Å app group

#### –†–µ–∂–∏–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**1. –†–µ–∂–∏–º "–ö–∞–∂–¥—ã–π —á–∞—Å" (hourly)**
- **–í—Ä–µ–º—è**: –° 8:00 –¥–æ 22:00 –∫–∞–∂–¥—ã–π —á–∞—Å
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ**: 15 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã**: `report_reminder_hourly_8`, `report_reminder_hourly_9`, ..., `report_reminder_hourly_22`

**2. –†–µ–∂–∏–º "2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å" (twice)**
- **–í—Ä–µ–º—è**: 8:00 –∏ 21:00
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ**: 2 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¥–µ–Ω—å
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã**: `report_reminder_morning`, `report_reminder_evening`

## üìù –¢–µ–∫—Å—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üè∑Ô∏è –ó–∞–≥–æ–ª–æ–≤–æ–∫
**–í—Å–µ–≥–¥–∞**: `"LazyBones"`

### üìÑ –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç

#### –û–±—ã—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (8:00 - 20:00, 22:00)
```
"–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?"
```

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–≥–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (21:00)
```
"–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è! –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è."
```

### üéµ –ó–≤—É–∫
- **–¢–∏–ø**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–≤—É–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è iOS
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞**: `content.sound = .default`

## üïê –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –†–µ–∂–∏–º "–ö–∞–∂–¥—ã–π —á–∞—Å"
| –í—Ä–µ–º—è | –¢–µ–∫—Å—Ç | –¢–∏–ø |
|-------|-------|-----|
| 8:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 9:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 10:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 11:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 12:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 13:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 14:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 15:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 16:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 17:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 18:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 19:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 20:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 21:00 | "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è! –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è." | –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–≥–∞—é—â–µ–µ |
| 22:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |

### –†–µ–∂–∏–º "2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å"
| –í—Ä–µ–º—è | –¢–µ–∫—Å—Ç | –¢–∏–ø |
|-------|-------|-----|
| 8:00 | "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?" | –û–±—ã—á–Ω–æ–µ |
| 21:00 | "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è! –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è." | –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–≥–∞—é—â–µ–µ |

## üîÑ –õ–æ–≥–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```swift
// 1. –û—Ç–º–µ–Ω–∞ —Å—Ç–∞—Ä—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
try await cancelAllNotifications()

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è
guard enabled else { return }

// 3. –°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Å–∞
for hour in startHour...endHour {
    let identifier = "report_reminder_hourly_\(hour)"
    let notificationBody = hour == 21 ? 
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è! –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è." : 
        "–í—Ä–µ–º—è –¥–ª—è –æ—Ç—á–µ—Ç–∞! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å?"
    
    try await scheduleRepeatingNotification(
        title: "LazyBones",
        body: notificationBody,
        hour: hour,
        minute: 0,
        identifier: identifier
    )
}
```

### –£—Å–ª–æ–≤–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. **–û—Ç—á–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω**: –ï—Å–ª–∏ `reportStatus == .done`, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—ã–∫–ª—é—á–µ–Ω—ã**: –ï—Å–ª–∏ `notificationsEnabled == false`
3. **–ù–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ä–∞–∑—Ä–µ—à–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–ª–∞—Å—Å—ã –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

- **NotificationService**: –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **PostNotificationService**: –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **UNUserNotificationCenter**: –°–∏—Å—Ç–µ–º–Ω—ã–π API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ú–µ—Ç–æ–¥—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```swift
func scheduleRepeatingNotification(
    title: String, 
    body: String, 
    hour: Int, 
    minute: Int, 
    identifier: String
) async throws
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

```swift
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Ä–µ–º—è –µ—â–µ –Ω–µ –ø—Ä–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è
let calendar = Calendar.current
let now = Date()
var targetDate = calendar.date(bySettingHour: hour, minute: minute, second: 0, of: now) ?? now

// –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–∂–µ –ø—Ä–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è, –ø–ª–∞–Ω–∏—Ä—É–µ–º –Ω–∞ –∑–∞–≤—Ç—Ä–∞
if targetDate <= now {
    targetDate = calendar.date(byAdding: .day, value: 1, to: targetDate) ?? targetDate
}
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–ª—è–µ—Ç—Å—è:

```
=== DEBUG: Notification Status ===
Authorization status: 2 (authorized)
Alert setting: 2 (enabled)
Sound setting: 2 (enabled)
Badge setting: 2 (enabled)
Pending notifications: 15
Pending: report_reminder_hourly_8
Pending: report_reminder_hourly_9
...
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```swift
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
let hasPermission = await checkNotificationPermission()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
let pending = await getPendingNotifications()

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
let settings = await getNotificationSettings()
```

## üö® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–≥–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ 21:00

- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è
- **–¢–µ–∫—Å—Ç**: "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è! –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–æ–≤ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è."
- **–í–∞–∂–Ω–æ—Å—Ç—å**: –í—ã–¥–µ–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- **–¢–∏–ø**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- **–ú–µ—Ö–∞–Ω–∏–∑–º**: `UNCalendarNotificationTrigger` —Å `repeats: true`
- **–û—Ç–º–µ–Ω–∞**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å—Ç–∞—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–º–µ–Ω—è—é—Ç—Å—è

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–æ–º

- **App Group**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–π app group
- **–í–∏–¥–∂–µ—Ç**: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ –≤–∏–¥–∂–µ—Ç–æ–º 